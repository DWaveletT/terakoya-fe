import{ai as h,bS as w,Y as _,V as B,_ as I,G as N,H as T,$ as S,a0 as C,a1 as t,aa as k,a3 as z,a4 as a,ah as P,af as U,ag as $,an as F,O as f,aB as R,bg as D,bT as O,bQ as q,P as A,a2 as b,aS as e,bn as G,bc as H,bd as v,be as K,ac as m,ad as L,b7 as M,ba as Q,bb as g,b5 as Y}from"./index-Cb2PR_UR.js";import{u as j,B as J}from"./BlockSidebar-DK9j10D2.js";import{T as W}from"./TextEditor-jhmQWRGE.js";import{E as x,a as X}from"./index-DYJ99Uq6.js";import"./index-NhRZgnkf.js";const Z=h({type:{type:String,values:["primary","success","info","warning","danger",""],default:""},size:{type:String,values:w,default:""},truncated:{type:Boolean},lineClamp:{type:[String,Number]},tag:{type:String,default:"span"}}),ee=_({name:"ElText"}),te=_({...ee,props:Z,setup(y){const u=y,p=B(),n=I("text"),c=N(()=>[n.b(),n.m(u.type),n.m(p.value),n.is("truncated",u.truncated),n.is("line-clamp",!T(u.lineClamp))]);return(i,d)=>(S(),C(U(i.tag),{class:z(a(c)),style:P({"-webkit-line-clamp":i.lineClamp})},{default:t(()=>[k(i.$slots,"default")]),_:3},8,["class","style"]))}});var ae=$(te,[["__file","text.vue"]]);const le=F(ae),se={class:"main-container"},oe={class:"submit"},ne=_({__name:"PostNew",setup(y){const u=j(),p=f([]);R(()=>{u.getBoards().then(l=>p.value=l)});const n=O(),c=q();function i(){let l=n.query.boardId;return A(l)?parseInt(l[0]||"1"):parseInt(l||"1")}const d=f(i()),r=f({id:null,board:null,like:null,dislike:null,title:"",content:"",poster:null,time:null});async function V(){Q({url:"http://43.143.171.43:9999/api/post/create",method:"POST",data:{board:d.value,title:r.value.title,content:r.value.content},withCredentials:!0}).then(l=>{c.push("/post/"+l.data.pid)}).catch(l=>{let s=l.response;!s||!s.data?g({title:"未知错误",message:"",type:"error"}):g({title:"创建失败",message:s.data.message,type:"error"})})}return(l,s)=>(S(),C(D,{bread:[{label:"寺子屋",name:"home"},{label:"帖子列表",name:"post.list"},{label:"发布帖子"}],title:"发布帖子"},{default:t(()=>[b("div",se,[e(a(X),{gutter:20},{default:t(()=>[e(a(x),{span:6},{default:t(()=>[e(J,{modelValue:d.value,"onUpdate:modelValue":s[0]||(s[0]=o=>d.value=o)},null,8,["modelValue"])]),_:1}),e(a(x),{span:18},{default:t(()=>[e(a(G),null,{default:t(()=>[e(a(H),{model:r.value,"label-width":"auto"},{default:t(()=>[e(a(v),{label:"帖子标题"},{default:t(()=>[e(a(K),{type:"text",modelValue:r.value.title,"onUpdate:modelValue":s[1]||(s[1]=o=>r.value.title=o),placeholder:"长度应介于 1 至 10 之间"},null,8,["modelValue"])]),_:1}),e(a(v),{label:"帖子内容"},{default:t(()=>[e(W,{modelValue:r.value.content,"onUpdate:modelValue":s[2]||(s[2]=o=>r.value.content=o),style:{"flex-grow":"1"}},null,8,["modelValue"])]),_:1})]),_:1},8,["model"]),b("div",oe,[b("span",null,[m("将会发布在 "),e(a(le),{type:"primary",size:"large"},{default:t(()=>{var o;return[m(L((o=p.value.find(E=>E.id===d.value))==null?void 0:o.name),1)]}),_:1}),m(" 版块")]),e(a(M),{type:"primary",onClick:V},{default:t(()=>[m("发布")]),_:1})])]),_:1})]),_:1})]),_:1})])]),_:1}))}}),me=Y(ne,[["__scopeId","data-v-c52fdb37"]]);export{me as default};
