import{_ as x,P as f,bc as E,aG as B,L as z,a2 as y,a3 as s,aZ as L,a1 as _,a4 as l,as as e,a6 as a,a_ as r,a8 as V,aE as D,b8 as T,b9 as P,bd as U,af as p,ae as c,b2 as g,be as I,bf as N,ad as q,aY as $,aX as j}from"./index-CJt0uDsL.js";import{C as F,_ as R,f as S}from"./index-B1hKmA4o.js";import{B as A}from"./BlockSidebar-1-Mk_cw7.js";import{u as G}from"./test-C12sp8V_.js";import{E as k,a as h}from"./index-Cn25ZZVY.js";const M={class:"main-container"},X={class:"cards"},Y={class:"title",style:{"margin-top":"0"}},Z={style:{"font-size":"small"}},H={style:{color:"var(--el-color-info)"}},J={class:"new-post"},K=x({__name:"PostList",setup(O){const i=f(0),u=G(),m=E(),o=f(1),d=f({total:0,posts:[]});function w(b){m.push({name:"post.detail",params:{pid:b}})}function C(){i.value>0?m.push({name:"post.new",query:{boardId:i.value}}):m.push({name:"post.new"})}function v(){console.log("query",o.value),d.value={total:100,posts:[...u.testPost,...u.testPost,...u.testPost,...u.testPost,...u.testPost]}}return B(()=>{v()}),z([o,i],()=>{v()}),(b,n)=>(_(),y(L,{bread:["寺子屋","帖子列表"],title:"帖子列表"},{default:s(()=>[l("div",M,[e(a(P),{gutter:20},{default:s(()=>[e(a(r),{span:6},{default:s(()=>[e(A,{all:!0,modelValue:i.value,"onUpdate:modelValue":n[0]||(n[0]=t=>i.value=t)},null,8,["modelValue"])]),_:1}),e(a(r),{span:18},{default:s(()=>[e(a(k),{"page-size":20,"pager-count":7,layout:"prev, pager, next",total:d.value.total,background:"","hide-on-single-page":"",small:"",class:"pagination","current-page":o.value,"onUpdate:currentPage":n[1]||(n[1]=t=>o.value=t)},null,8,["total","current-page"]),l("div",X,[(_(!0),V(q,null,D(d.value.posts,t=>(_(),y(a(T),{key:t.id,class:"post-item",onClick:Q=>w(t.id)},{default:s(()=>[e(a(P),{style:{height:"60px"}},{default:s(()=>[e(a(r),{span:3,class:"card-item vertical-middle"},{default:s(()=>[e(U,{user:t.poster,size:60},null,8,["user"])]),_:2},1024),e(a(r),{span:7,class:"card-item"},{default:s(()=>[l("h3",Y,p(t.title),1),l("span",Z,[e(F,{user:t.poster},null,8,["user"]),c(),l("span",H,[c("发表于 "),e(R,{date:new Date(t.time),placement:"bottom"},null,8,["date"])])])]),_:2},1024),e(a(r),{span:12,class:"card-item describe"},{default:s(()=>[c(p(t.content),1)]),_:2},1024),e(a(r),{span:2,class:"card-item vertical-middle"},{default:s(()=>[l("div",null,[e(a(h),{type:"success",class:"info-item"},{default:s(()=>[e(a(g),{icon:a(I)},null,8,["icon"]),c(" "+p(t.like>999?"999+":t.like),1)]),_:2},1024),e(a(h),{type:"danger",class:"info-item"},{default:s(()=>[e(a(g),{icon:a(N)},null,8,["icon"]),c(" "+p(t.dislike>999?"999+":t.dislike),1)]),_:2},1024)])]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),e(a(k),{"page-size":20,"pager-count":7,layout:"prev, pager, next",total:d.value.total,background:"","hide-on-single-page":"",small:"",class:"pagination","current-page":o.value,"onUpdate:currentPage":n[2]||(n[2]=t=>o.value=t)},null,8,["total","current-page"])]),_:1})]),_:1})]),l("div",J,[e(a($),{circle:"",size:"large",style:{border:"2px solid var(--el-color-primary)"},onClick:C},{default:s(()=>[e(a(g),{icon:a(S),size:"lg"},null,8,["icon"])]),_:1})])]),_:1}))}}),le=j(K,[["__scopeId","data-v-72b464a3"]]);export{le as default};
