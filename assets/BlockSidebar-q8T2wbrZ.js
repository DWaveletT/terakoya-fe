import{bU as S,O as g,b8 as k,ba as C,bb as b,Y as y,bV as x,aB as V,bW as E,$ as r,a0 as I,a1 as i,aS as f,a2 as u,a4 as d,a6 as m,a3 as v,ae as w,aY as M,ad as h,ab as N,bn as _,bo as $,bp as A,b5 as D}from"./index-wAP6j2SH.js";import{E as O,a as T}from"./index-CXip2sqR.js";const Y=S("info",()=>{const e=g([]);function c(t){e.value=t}async function p(){const t=k();return e.value.length>0||await C({url:"http://43.143.171.43:9999/api/board/list",method:"POST",data:{token:t.getToken()},withCredentials:!0}).then(a=>{e.value=a.data.boards}).catch(a=>{let s=a.response;!s||!s.data?b({title:"未知错误",message:"",type:"error"}):b({title:"版块列表获取失败",message:s.data.message,type:"error"})}),e.value}return{getBoards:p,setBoards:c}}),B=e=>($("data-v-9eb518ab"),e=e(),A(),e),q=B(()=>u("h3",{class:"title"},"版块选择",-1)),z={class:"boards"},F=["onClick"],L=B(()=>u("h3",{class:"title"},"版块说明",-1)),P=y({__name:"BlockSidebar",props:x({all:{type:Boolean,default:!1}},{modelValue:{required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(e){const c=e;k();const p=Y(),t=g([]);V(()=>{p.getBoards().then(o=>t.value=o)});const a=E(e,"modelValue");function s(){var o;return((o=t.value.find(n=>n.id===a.value))==null?void 0:o.description)||""}return(o,n)=>(r(),I(d(T),{target:".main-container",offset:20},{default:i(()=>[f(d(_),null,{default:i(()=>[q,u("div",z,[f(d(O),{height:"200px"},{default:i(()=>[c.all?(r(),m("div",{key:0,class:v(["board-item all",{"selected-all":a.value===0}]),onClick:n[0]||(n[0]=l=>a.value=0)}," 所有版块 ",2)):w("",!0),(r(!0),m(N,null,M(t.value,l=>(r(),m("div",{key:l.id,class:v(["board-item",{selected:a.value===l.id}]),onClick:U=>a.value=l.id},h(l.name),11,F))),128))]),_:1})])]),_:1}),f(d(_),{style:{"margin-top":"0.5em"}},{default:i(()=>[L,u("p",null,h(s()),1)]),_:1})]),_:1}))}}),G=D(P,[["__scopeId","data-v-9eb518ab"]]);export{G as B,Y as u};
